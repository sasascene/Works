#N canvas 117 378 514 264 10;
#X obj 18 -305 inlet;
#X floatatom 18 -175 5 0 0 0 - - -;
#X text 25 -158 引き込み処理;
#N canvas 582 22 537 722 entrainment 0;
#X floatatom 24 99 10 0 0 2 Σsin(φj-φi) - -;
#N canvas 748 123 206 195 K/N 0;
#X obj 74 62 loadbang;
#X obj 25 130 /;
#X floatatom 25 105 5 0 0 0 - - -;
#X text 23 85 結合強度;
#X text 74 85 オブジェクト数;
#X text 23 35 係数(結合強度/オブジェクト数);
#X obj 25 157 outlet;
#X obj 25 62 r K;
#X obj 74 103 \$2;
#X floatatom 74 129 5 0 0 0 - - -;
#X connect 0 0 8 0;
#X connect 1 0 6 0;
#X connect 2 0 1 0;
#X connect 7 0 2 0;
#X connect 8 0 1 1;
#X connect 8 0 9 0;
#X restore 64 123 pd K/N;
#X text 111 123 係数(結合強度/オブジェクト数);
#X obj 49 170 *;
#X obj 73 267 +;
#X floatatom 49 194 10 0 0 0 - - -;
#X text 109 44 他オブジェクトとの;
#X text 109 59 位相差の正弦値の総和;
#X floatatom 64 146 10 0 0 0 - - -;
#X obj 88 218 inlet;
#X floatatom 88 242 10 0 0 0 - - -;
#X text 24 6 蔵本モデルによる引き込み演算;
#X obj 130 447 \$1;
#X obj 103 502 +;
#X obj 103 699 outlet;
#X obj 103 425 t f b;
#X floatatom 103 625 10 0 0 0 - - -;
#X text 126 217 固有振動数（ωi）;
#X text 109 74 Σsin(φj-φi);
#X floatatom 103 315 10 0 0 2 瞬間の固有振動数の変化量(Δω)
- -;
#N canvas 629 34 404 635 sigma_sin 0;
#X obj 32 195 until;
#X obj 32 141 t f b;
#X obj 115 329 -;
#X obj 115 414 +;
#X floatatom 160 414 5 0 0 0 - - -;
#X msg 160 389 0;
#X obj 95 457 f;
#X obj 32 63 inlet;
#X obj 95 503 outlet;
#X obj 115 351 sin;
#X text 141 333 位相差の正弦値;
#X text 26 18 他オブジェクトとの;
#X text 26 33 位相差の正弦値の総和;
#X floatatom 95 481 5 0 0 0 - - -;
#X obj 183 255 \$1;
#X obj 32 86 t b b;
#X text 211 254 自オブジェクトの位相を取得;
#X text 40 254 各オブジェクトの位相を取得;
#X text 132 435 総和;
#X text 188 389 初期化;
#X obj 32 276 tabread obj_phase;
#X obj 183 276 tabread obj_phase;
#X text 142 346 sin(φj-φi);
#X text 132 453 Σsin(φj-φi);
#X text 140 33 Σsin(φj-φi);
#X obj 95 414 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 32 117 0;
#X text 62 116 オブジェクト数;
#X obj 186 117 \$2;
#X obj 186 94 loadbang;
#X msg 136 143 set \$1;
#X obj 186 69 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 186 143 - 1;
#X floatatom 186 168 5 0 0 0 - - -;
#X msg 59 172 -1;
#N canvas 907 219 328 344 iterator 0;
#X obj 44 44 inlet;
#X obj 42 303 outlet;
#X obj 252 42 inlet;
#X text 251 20 reset;
#X obj 252 100 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 44 193 +;
#X floatatom 136 194 5 0 0 0 - - -;
#X msg 44 168 1;
#X floatatom 44 218 5 0 0 0 - - -;
#X text 136 22 to;
#X obj 136 144 sel;
#X text 44 21 bang;
#X text 97 22 from;
#X obj 44 242 t f f;
#X obj 93 277 sel;
#X obj 93 303 outlet;
#X obj 97 44 inlet;
#X obj 135 44 inlet;
#X msg 136 168 -1;
#X connect 0 0 7 0;
#X connect 2 0 4 0;
#X connect 4 0 18 0;
#X connect 5 0 6 0;
#X connect 5 0 8 0;
#X connect 6 0 5 1;
#X connect 7 0 5 0;
#X connect 8 0 10 0;
#X connect 8 0 13 0;
#X connect 10 0 18 0;
#X connect 13 0 14 0;
#X connect 13 1 1 0;
#X connect 14 0 15 0;
#X connect 16 0 6 0;
#X connect 17 0 10 1;
#X connect 17 0 14 1;
#X connect 18 0 6 0;
#X restore 32 225 pd iterator;
#X connect 0 0 35 0;
#X connect 1 0 0 0;
#X connect 1 1 5 0;
#X connect 1 1 34 0;
#X connect 1 1 35 3;
#X connect 2 0 9 0;
#X connect 3 0 4 0;
#X connect 3 0 6 1;
#X connect 4 0 3 1;
#X connect 5 0 4 0;
#X connect 6 0 13 0;
#X connect 7 0 15 0;
#X connect 9 0 3 0;
#X connect 13 0 8 0;
#X connect 14 0 21 0;
#X connect 15 0 26 0;
#X connect 15 1 14 0;
#X connect 20 0 2 0;
#X connect 21 0 2 1;
#X connect 25 0 6 0;
#X connect 26 0 1 0;
#X connect 28 0 30 0;
#X connect 28 0 32 0;
#X connect 29 0 28 0;
#X connect 30 0 26 0;
#X connect 31 0 29 0;
#X connect 32 0 33 0;
#X connect 33 0 35 2;
#X connect 34 0 35 1;
#X connect 35 0 20 0;
#X connect 35 1 25 0;
#X restore 24 59 pd sigma_sin;
#X text 104 266 dω/dt = ωi+(K/N)Σsin(φj-φi);
#X text 74 169 (K/N)Σsin(φj-φi);
#X text 119 334 Δφ=Δωt かつ t=1 であるため;
#X text 118 350 固有振動数の変化量(Δω)は位相の変化量(Δφ)に等しい
;
#X text 117 370 現在の位相(φi)に位相の変化量(Δφ)を加算することで
;
#X text 117 387 引き込み処理後の位相(Φ)を求めることができる
;
#X text 135 504 Φ=φi+Δφ;
#X text 137 405 Φ=φi+Δφ;
#X text 135 489 引き込み処理による位相(Φ)の計算;
#X text 153 447 自オブジェクトの位相(φi)を取得;
#X text 201 648 位相の保存;
#X obj 267 677 \$1;
#X obj 162 651 t f b;
#X obj 24 32 r clock;
#X obj 130 469 tabread obj_phase;
#X obj 162 700 tabwrite obj_phase;
#X obj 130 547 pi;
#X obj 130 569 * 2;
#X obj 103 597 expr if($f1>$f2 \, $f1-$f2 \, $f1);
#X obj 103 524 t f b;
#X connect 0 0 3 0;
#X connect 1 0 8 0;
#X connect 3 0 5 0;
#X connect 4 0 19 0;
#X connect 5 0 4 0;
#X connect 8 0 3 1;
#X connect 9 0 10 0;
#X connect 10 0 4 1;
#X connect 12 0 35 0;
#X connect 13 0 40 0;
#X connect 15 0 13 0;
#X connect 15 1 12 0;
#X connect 16 0 14 0;
#X connect 16 0 33 0;
#X connect 19 0 15 0;
#X connect 20 0 0 0;
#X connect 32 0 36 1;
#X connect 33 0 36 0;
#X connect 33 1 32 0;
#X connect 34 0 20 0;
#X connect 35 0 13 1;
#X connect 37 0 38 0;
#X connect 38 0 39 1;
#X connect 39 0 16 0;
#X connect 40 0 39 0;
#X connect 40 1 37 0;
#X restore 18 -138 pd entrainment;
#X obj 18 -111 outlet;
#X text 17 -326 固有振動数（ω）;
#X obj 18 -208 / 1;
#X obj 68 -304 r dt;
#X obj 95 -257 expr 1000/$f1;
#X floatatom 95 -233 5 0 0 0 - - -;
#X text 183 -257 角速度（rad/s）を単位時間（Δt）あたりの変化量（Δω）に変換
;
#X obj 68 -282 t b f;
#X obj 18 -255 f;
#X text 58 -176 Δω;
#X connect 0 0 12 0;
#X connect 1 0 3 0;
#X connect 3 0 4 0;
#X connect 6 0 1 0;
#X connect 7 0 11 0;
#X connect 8 0 9 0;
#X connect 9 0 6 1;
#X connect 11 0 12 0;
#X connect 11 1 8 0;
#X connect 12 0 6 0;
#X coords 0 264 1 263 50 40 0;
